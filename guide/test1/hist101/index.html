<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIST 101 - Unlock the Answer Key</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .mission {
            background: #f0f4ff;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .mission h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.4em;
        }

        .progress-indicator {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #dee2e6;
        }

        .progress-bar {
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .riddles-section {
            margin-bottom: 40px;
        }

        .riddle {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .riddle:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .riddle-number {
            background: #667eea;
            color: white;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .riddle-text {
            font-size: 1.05em;
            line-height: 1.6;
            color: #2c3e50;
        }

        .riddle-input {
            margin-top: 15px;
        }

        .riddle-input input {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1em;
            text-transform: uppercase;
            transition: border-color 0.3s;
        }

        .riddle-input input:focus {
            outline: none;
            border-color: #667eea;
        }

        .riddle-input.correct input {
            border-color: #28a745;
            background-color: #d4edda;
        }

        .riddle-input.incorrect input {
            border-color: #dc3545;
            background-color: #f8d7da;
        }

        .cipher-key {
            background: #2c3e50;
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .cipher-key h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3em;
            color: #a29bfe;
        }

        .cipher-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .cipher-item {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cipher-answer {
            font-weight: bold;
        }

        .cipher-letter {
            background: #a29bfe;
            color: #2c3e50;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .password-section {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }

        .password-section h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .password-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .password-letter {
            width: 50px;
            height: 60px;
            background: white;
            border: 3px solid #2c3e50;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
        }

        .check-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin-top: 15px;
        }

        .check-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .check-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .unlock-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            display: none;
            margin-top: 15px;
        }

        .unlock-button:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        .feedback.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .feedback.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.6em;
            }
            
            .content {
                padding: 20px;
            }
            
            .password-letter {
                width: 40px;
                height: 50px;
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîê UNLOCK THE ANSWER KEY!</h1>
            <p>HIST 101 Exam 1 - Password Puzzle</p>
        </div>

        <div class="content">
            <div class="mission">
                <h2>üéØ Your Mission</h2>
                <p>Solve the 11 puzzles below. Each answer gives you ONE LETTER of the password. Use the cipher key to find which letter each answer represents. Once you've solved all puzzles, the 11-letter password will be revealed!</p>
            </div>

            <div class="progress-indicator">
                <strong>Progress: <span id="progress-text">0/11</span> Puzzles Solved</strong>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <div class="riddles-section">
                <h2 style="margin-bottom: 20px; color: #2c3e50;">üìú The Puzzles</h2>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 1</div>
                    <div class="riddle-text">Democracy cannot survive on rights alone. Citizens must fulfill their _________________.</div>
                    <div class="riddle-input">
                        <input type="text" id="answer1" placeholder="Enter your answer..." data-correct="OBLIGATIONS" data-position="0">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 2</div>
                    <div class="riddle-text">Complete the name of Virginia's first representative assembly (established 1619): House of ___________________</div>
                    <div class="riddle-input">
                        <input type="text" id="answer2" placeholder="Enter your answer..." data-correct="BURGESSES" data-position="1">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 3</div>
                    <div class="riddle-text">Where did the Pilgrims establish their colony in 1620? (Answer: P__________ colony)</div>
                    <div class="riddle-input">
                        <input type="text" id="answer3" placeholder="Enter your answer..." data-correct="PLYMOUTH" data-position="2">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 4</div>
                    <div class="riddle-text">Which historical skill means "making a reasoned argument about what most likely happened based on evidence"?</div>
                    <div class="riddle-input">
                        <input type="text" id="answer4" placeholder="Enter your answer..." data-correct="INTERPRETATION" data-position="3">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 5</div>
                    <div class="riddle-text">Complete Madison's famous quote: "If men were angels, no __________________ would be necessary."</div>
                    <div class="riddle-input">
                        <input type="text" id="answer5" placeholder="Enter your answer..." data-correct="GOVERNMENT" data-position="4">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 6</div>
                    <div class="riddle-text">What do we call the structured collections of evidence that preserve records for future debate?</div>
                    <div class="riddle-input">
                        <input type="text" id="answer6" placeholder="Enter your answer..." data-correct="ARCHIVES" data-position="5">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 7</div>
                    <div class="riddle-text">What cash crop saved Virginia from economic disaster starting in 1616?</div>
                    <div class="riddle-input">
                        <input type="text" id="answer7" placeholder="Enter your answer..." data-correct="TOBACCO" data-position="6">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 8</div>
                    <div class="riddle-text">What type of servants signed labor contracts for passage to America? (__________________ servants)</div>
                    <div class="riddle-input">
                        <input type="text" id="answer8" placeholder="Enter your answer..." data-correct="INDENTURED" data-position="7">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 9</div>
                    <div class="riddle-text">According to Article VI, what is "the supreme Law of the Land"?</div>
                    <div class="riddle-input">
                        <input type="text" id="answer9" placeholder="Enter your answer..." data-correct="CONSTITUTION" data-position="8">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 10</div>
                    <div class="riddle-text">What are "unwritten expectations about behavior that help disagreement remain manageable"? (Democratic __________)</div>
                    <div class="riddle-input">
                        <input type="text" id="answer10" placeholder="Enter your answer..." data-correct="NORMS" data-position="9">
                    </div>
                </div>

                <div class="riddle">
                    <div class="riddle-number">PUZZLE 11</div>
                    <div class="riddle-text">Complete the phrase students used to describe Puritans: "Selfless inward, ________________ outward"</div>
                    <div class="riddle-input">
                        <input type="text" id="answer11" placeholder="Enter your answer..." data-correct="SELFISH" data-position="10">
                    </div>
                </div>
            </div>

            <div class="cipher-key">
                <h3>üîë CIPHER KEY</h3>
                <p style="text-align: center; margin-bottom: 15px; opacity: 0.9;">Each answer gives you a letter for the password:</p>
                <div class="cipher-table">
                    <div class="cipher-item">
                        <span class="cipher-answer">OBLIGATIONS</span>
                        <span class="cipher-letter">O</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">BURGESSES</span>
                        <span class="cipher-letter">B</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">PLYMOUTH (4th letter)</span>
                        <span class="cipher-letter">L</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">INTERPRETATION</span>
                        <span class="cipher-letter">I</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">GOVERNMENT</span>
                        <span class="cipher-letter">G</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">ARCHIVES</span>
                        <span class="cipher-letter">A</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">TOBACCO</span>
                        <span class="cipher-letter">T</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">INDENTURED</span>
                        <span class="cipher-letter">I</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">CONSTITUTION (11th letter)</span>
                        <span class="cipher-letter">O</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">NORMS</span>
                        <span class="cipher-letter">N</span>
                    </div>
                    <div class="cipher-item">
                        <span class="cipher-answer">SELFISH</span>
                        <span class="cipher-letter">S</span>
                    </div>
                </div>
            </div>

            <div class="password-section">
                <h3>üîì YOUR PASSWORD</h3>
                <p style="margin-bottom: 15px; color: white;">Solve all puzzles to reveal the password!</p>
                <div class="password-display">
                    <div class="password-letter" id="letter0">?</div>
                    <div class="password-letter" id="letter1">?</div>
                    <div class="password-letter" id="letter2">?</div>
                    <div class="password-letter" id="letter3">?</div>
                    <div class="password-letter" id="letter4">?</div>
                    <div class="password-letter" id="letter5">?</div>
                    <div class="password-letter" id="letter6">?</div>
                    <div class="password-letter" id="letter7">?</div>
                    <div class="password-letter" id="letter8">?</div>
                    <div class="password-letter" id="letter9">?</div>
                    <div class="password-letter" id="letter10">?</div>
                </div>
                <button class="check-button" id="checkButton" disabled>Check My Answers</button>
                <button class="unlock-button" id="unlockButton">üéâ Access Answer Key</button>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>
    </div>

    <script>
        const cipherMap = {
            'OBLIGATIONS': 'O',
            'BURGESSES': 'B',
            'PLYMOUTH': 'L',
            'INTERPRETATION': 'I',
            'GOVERNMENT': 'G',
            'ARCHIVES': 'A',
            'TOBACCO': 'T',
            'INDENTURED': 'I',
            'CONSTITUTION': 'O',
            'NORMS': 'N',
            'SELFISH': 'S'
        };

        const correctPassword = 'OBLIGATIONS';
        let solvedCount = 0;
        const password = new Array(11).fill('?');

        // Add event listeners to all inputs
        document.querySelectorAll('.riddle-input input').forEach(input => {
            input.addEventListener('input', function() {
                checkAnswer(this);
            });
        });

        function checkAnswer(input) {
            const userAnswer = input.value.trim().toUpperCase();
            const correctAnswer = input.dataset.correct;
            const position = parseInt(input.dataset.position);
            const parentDiv = input.parentElement;

            if (userAnswer === correctAnswer) {
                parentDiv.classList.remove('incorrect');
                parentDiv.classList.add('correct');
                
                // Get the letter for this answer
                let letter = '';
                if (position === 2) { // Plymouth - 4th letter
                    letter = 'L';
                } else if (position === 8) { // Constitution - 11th letter
                    letter = 'O';
                } else {
                    letter = cipherMap[correctAnswer].charAt(0);
                }
                
                password[position] = letter;
                document.getElementById(`letter${position}`).textContent = letter;
                
                updateProgress();
            } else if (userAnswer.length > 0) {
                parentDiv.classList.remove('correct');
                parentDiv.classList.add('incorrect');
                password[position] = '?';
                document.getElementById(`letter${position}`).textContent = '?';
                updateProgress();
            } else {
                parentDiv.classList.remove('correct', 'incorrect');
                password[position] = '?';
                document.getElementById(`letter${position}`).textContent = '?';
                updateProgress();
            }
        }

        function updateProgress() {
            solvedCount = password.filter(d => d !== '?').length;
            document.getElementById('progress-text').textContent = `${solvedCount}/11`;
            document.getElementById('progress-fill').style.width = `${(solvedCount / 11) * 100}%`;

            if (solvedCount === 11) {
                document.getElementById('checkButton').disabled = false;
            } else {
                document.getElementById('checkButton').disabled = true;
            }
        }

        document.getElementById('checkButton').addEventListener('click', function() {
            const userPassword = password.join('');
            const feedback = document.getElementById('feedback');
            
            if (userPassword === correctPassword) {
                feedback.className = 'feedback success';
                feedback.style.display = 'block';
                feedback.innerHTML = 'üéâ <strong>CORRECT!</strong> Your password is: <strong>' + correctPassword + '</strong><br>Click below to access the answer key!';
                document.getElementById('unlockButton').style.display = 'inline-block';
                this.style.display = 'none';
            } else {
                feedback.className = 'feedback error';
                feedback.style.display = 'block';
                feedback.innerHTML = '‚ùå Not quite right. Double-check your answers and try again!';
            }
        });

        document.getElementById('unlockButton').addEventListener('click', function() {
            const password = correctPassword;
            alert('üéâ Congratulations!\n\nYour password is: ' + password + '\n\nEmail Prof. Hauselmann with this password to receive the answer key, or use it to access the protected PDF on Canvas!');
        });

        // Initialize
        updateProgress();

        // Auto-save progress
        function saveProgress() {
            for (let i = 0; i < 11; i++) {
                const input = document.getElementById(`answer${i + 1}`);
                if (input) {
                    localStorage.setItem(`hist101_puzzle_${i}`, input.value);
                }
            }
        }

        function loadProgress() {
            for (let i = 0; i < 11; i++) {
                const saved = localStorage.getItem(`hist101_puzzle_${i}`);
                if (saved) {
                    const input = document.getElementById(`answer${i + 1}`);
                    if (input) {
                        input.value = saved;
                        checkAnswer(input);
                    }
                }
            }
        }

        // Save every 2 seconds
        setInterval(saveProgress, 2000);

        // Load on page load
        window.addEventListener('load', loadProgress);
    </script>
</body>
</html>
