<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galileo Investigation: Was He Really a Heretic?</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #8b4513 0%, #d2691e 100%);
            color: #2c1810;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, #1a0f0a 0%, #3d2817 100%);
            color: #f4e4c1;
            padding: 40px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            color: #f4e4c1;
        }

        .subtitle {
            font-size: 1.2em;
            font-style: italic;
            color: #d4af37;
        }

        .central-question {
            background: #fff9e6;
            border-left: 5px solid #8b4513;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 1.3em;
            text-align: center;
            font-weight: bold;
            color: #8b4513;
        }

        .progress-indicator {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            padding: 20px;
            background: #f4e4c1;
            border-radius: 8px;
            border: 3px solid #8b4513;
        }

        .progress-step {
            text-align: center;
            flex: 1;
            padding: 10px;
            opacity: 0.5;
            transition: all 0.3s;
            color: #2c1810;
        }

        .progress-step.completed {
            opacity: 1;
            color: #2d5016;
            font-weight: bold;
        }

        .progress-step.active {
            opacity: 1;
            color: #8b4513;
            font-weight: bold;
            transform: scale(1.1);
        }

        .phase-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .phase-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .timeline {
            background: #f4e4c1;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .timeline-item {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: #fff;
            border-left: 4px solid #d4af37;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .timeline-item.highlight {
            border-left-color: #8b0000;
            border-left-width: 5px;
            background: rgba(139, 0, 0, 0.1);
        }

        .timeline-year {
            color: #8b4513;
            font-weight: bold;
            min-width: 60px;
            font-size: 1.1em;
        }

        .timeline-event {
            flex: 1;
        }

        .info-box {
            background: #fff9e6;
            padding: 25px;
            border-left: 5px solid #8b4513;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .info-box h4 {
            color: #8b4513;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .document-section {
            background: #f4e4c1;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .document-header {
            background: linear-gradient(135deg, #1a0f0a 0%, #3d2817 100%);
            color: #f4e4c1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            text-align: center;
        }

        .document-header h3 {
            color: #d4af37;
            font-size: 1.6em;
            margin-bottom: 10px;
        }

        .document-header p {
            color: #f4e4c1;
            font-style: italic;
        }

        .document-text {
            background: #fff;
            padding: 25px;
            border-radius: 8px;
            border: 2px solid #d4af37;
            margin: 20px 0;
            font-size: 1.05em;
            line-height: 1.8;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .document-text p {
            margin-bottom: 20px;
        }

        .document-source {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ccc;
        }

        .question-section {
            background: #fff9e6;
            border: 2px solid #8b4513;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .question-section h4 {
            color: #8b4513;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .question {
            margin: 25px 0;
        }

        .question label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #2c1810;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: #fff;
            border: 2px solid #8b4513;
            border-radius: 5px;
            color: #2c1810;
            font-family: 'Georgia', serif;
            font-size: 1em;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #d4af37;
            background: #fff9e6;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
            font-family: 'Georgia', serif;
        }

        .btn-primary {
            background: #8b4513;
            color: #f4e4c1;
        }

        .btn-primary:hover:not(:disabled) {
            background: #6d3610;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            background: #999;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .judgment-section {
            background: #f4e4c1;
            border: 3px solid #8b4513;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .judgment-section h2 {
            color: #8b4513;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .verdict-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .verdict-card {
            background: #fff;
            border: 3px solid #8b4513;
            border-radius: 10px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .verdict-card:hover {
            background: #fff9e6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .verdict-card.selected {
            background: #fff9e6;
            border-color: #d4af37;
            border-width: 4px;
        }

        .verdict-card h3 {
            color: #8b4513;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .verdict-card p {
            color: #2c1810;
        }

        .argument-builder {
            background: #fff9e6;
            padding: 25px;
            border-radius: 8px;
            margin: 25px 0;
            border: 2px solid #8b4513;
        }

        .argument-builder h4 {
            color: #8b4513;
            margin-bottom: 15px;
        }

        .argument-item {
            margin: 25px 0;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            border-left: 4px solid #d4af37;
        }

        .reveal-section {
            background: #f4e4c1;
            border: 3px solid #8b4513;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .reveal-section h2 {
            color: #8b4513;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .historical-verdict {
            background: rgba(139, 0, 0, 0.2);
            border: 2px solid #8b0000;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }

        .historical-verdict h3 {
            color: #8b0000;
            margin-bottom: 15px;
        }

        .navigation-buttons {
            text-align: center;
            margin: 30px 0;
        }

        .navigation-buttons .btn {
            margin: 0 10px;
        }

        .complete-check {
            color: #2d5016;
            font-size: 1.1em;
            margin-left: 10px;
        }

        .warning-box {
            background: rgba(139, 0, 0, 0.2);
            border-left: 4px solid #8b0000;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box strong {
            color: #8b0000;
        }

        .success-banner {
            background: #2d5016;
            color: #f4e4c1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 5px solid #d4af37;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        h2 {
            color: #8b4513;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #d4af37;
            padding-bottom: 10px;
        }

        h3 {
            color: #8b4513;
            font-size: 1.5em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        ul {
            margin-left: 30px;
            margin-top: 15px;
        }

        li {
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            
            .verdict-options {
                grid-template-columns: 1fr;
            }

            .progress-indicator {
                flex-wrap: wrap;
            }

            .progress-step {
                font-size: 0.9em;
            }

            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }
        }
        .breadcrumb {
            max-width: 1200px;
            margin: 0 auto 15px auto;
            padding: 10px 15px;
            font-family: 'Georgia', serif;
            font-size: 0.95em;
            color: #c0c0c0;
        }

        .breadcrumb a {
            color: #d4af37;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
            color: #f4e4c1;
        }

        .breadcrumb .separator {
            margin: 0 8px;
            color: #888;
        }

        .breadcrumb .current {
            color: #f4e4c1;
        }
    </style>
</head>
<body>
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="index.html">Home</a>
        <span class="separator">‚Ä∫</span>
        <a href="activities.html">Interactive Activities</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">Galileo Investigation</span>
    </nav>

    <div class="container">
        <header>
            <h1>‚öñÔ∏è Was Galileo Really a Heretic? ‚öñÔ∏è</h1>
            <p class="subtitle">A Historical Investigation</p>
        </header>

        <div class="central-question">
            Central Historical Question: Was Galileo really a heretic?
        </div>

        <div class="progress-indicator" id="progressBar">
            <div class="progress-step active" data-phase="0">
                <div>üìö</div>
                <div>Background</div>
            </div>
            <div class="progress-step" data-phase="1">
                <div>üìú</div>
                <div>Document A</div>
            </div>
            <div class="progress-step" data-phase="2">
                <div>üìú</div>
                <div>Document B</div>
            </div>
            <div class="progress-step" data-phase="3">
                <div>‚öñÔ∏è</div>
                <div>Your Judgment</div>
            </div>
            <div class="progress-step" data-phase="4">
                <div>üîç</div>
                <div>What Happened</div>
            </div>
        </div>

        <!-- Phase 0: Background & Timeline -->
        <div class="phase-content active" id="phase0">
            <h2 style="color: #ffd700; text-align: center; margin-bottom: 30px;">Background Information</h2>

            <div class="info-box">
                <h4>Important Definitions</h4>
                <p><strong>Geocentrism:</strong> A model that places the Earth at the center of the universe, with the sun and other bodies orbiting around it.</p>
                <p style="margin-top: 10px;"><strong>Heliocentrism:</strong> A model that places the sun at the center of the solar system, with the Earth and other planets orbiting around it.</p>
                <p style="margin-top: 10px;"><strong>Heresy:</strong> Beliefs that go against the official teachings of the Church.</p>
                <p style="margin-top: 10px;"><strong>The Inquisition:</strong> A Church court established to identify and punish heretics.</p>
            </div>

            <div class="info-box">
                <h4>Student Information</h4>
                <label for="student-name" style="display: block; margin-top: 10px;"><strong>Your Name:</strong></label>
                <input type="text" id="student-name" placeholder="Enter your full name" style="width: 100%; padding: 12px; border: 2px solid rgba(100, 149, 237, 0.3); border-radius: 5px; font-family: 'Georgia', serif; font-size: 1em; margin: 10px 0;">
                
                <label for="section-number" style="display: block; margin-top: 10px;"><strong>Section Number:</strong></label>
                <input type="text" id="section-number" placeholder="Enter your section number (e.g., 101, 102)" style="width: 100%; padding: 12px; border: 2px solid rgba(100, 149, 237, 0.3); border-radius: 5px; font-family: 'Georgia', serif; font-size: 1em; margin: 10px 0;">
            </div>

            <div class="timeline">
                <h2 style="color: #8b4513; text-align: center; margin-bottom: 30px;">Timeline: Heliocentrism and the Catholic Church</h2>
                
                <div class="timeline-item">
                    <div class="timeline-year">1543</div>
                    <div class="timeline-event">Nicolas Copernicus published a book supporting the heliocentric theory.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1545</div>
                    <div class="timeline-event">Pope Paul III called the Council of Trent to stop the spread of Protestantism and revive the Catholic Church. It said only the Church could interpret the Bible, and it set up the Inquisition to combat heresy.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1564</div>
                    <div class="timeline-event">Galileo Galilei was born.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1600</div>
                    <div class="timeline-event">The Inquisition tried Giordano Bruno and burned him at the stake for heresy. He supported the heliocentric theory.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1609</div>
                    <div class="timeline-event">Galileo invented a telescope that convinced him of the heliocentric model.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1615</div>
                    <div class="timeline-event">The Catholic Church told Galileo to stop sharing his theory in public. Paolo Antonio Foscarini published a book defending Copernicus.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1616</div>
                    <div class="timeline-event">The Catholic Church added Copernicus's work (and others supporting the heliocentric model) to its list of banned books.</div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-year">1632</div>
                    <div class="timeline-event">Galileo published "Dialogue Concerning the Two Chief World Systems."</div>
                </div>

                <div class="timeline-item highlight">
                    <div class="timeline-year">1633</div>
                    <div class="timeline-event"><strong>The Inquisition charged Galileo with heresy and tried him in Rome.</strong></div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button class="btn btn-primary" onclick="startInvestigation()">Continue to Document A ‚Üí</button>
            </div>
        </div>

        <!-- Phase 1: Document A -->
        <div class="phase-content" id="phase1">
            <div class="document-section">
                <div class="document-header">
                    <h3>Document A: Galileo's Letter</h3>
                    <p>Galileo wrote the following letter to Duchess Christina of Tuscany in 1615.</p>
                    <p>In this letter, he defends himself against the charges of heresy.</p>
                </div>

                <div class="document-text">
                    <p>Some years ago I discovered in the heavens many things that had not been seen before our own age. The novelty of these things . . . stirred up several professors against me. They hurled various charges and published numerous writings filled with vain arguments, and they made the grave mistake of sprinkling these with passages taken from places in the Bible, which they failed to understand properly.</p>
                    
                    <p>The reason given for attacking the opinion that the earth moves and the sun stands still is that in many places in the Bible one may read that the sun moves and the earth stands still. Since the Bible cannot err, it follows that anyone who claims that the sun is motionless and the earth movable takes an erroneous and heretical position.</p>
                    
                    <p>With regard to this argument, I think in the first place that it is very pious to say and prudent to affirm that the holy Bible can never speak untruth‚Äîwhenever its true meaning is understood. But I believe nobody will deny that the Bible is often very complex, and may say things which are quite different from what its bare words signify. . . .</p>
                    
                    <p>I do not believe that the same God who has given senses, reason and intellect has intended us to not to use them. . . . He would not require us to deny sense and reason in physical matters of direct experience. . . .</p>
                    
                    <p>Can an opinion be heretical and yet have no concern with the salvation of souls?</p>

                    <p class="source-citation">Source: Galileo Galilei, "Letter to the Grand Duchess Christina of Tuscany," 1615.</p>
                </div>

                <div class="question-section">
                    <h4>Document Analysis Questions</h4>
                    
                    <div class="question">
                        <label>1. Sourcing: When was this document written?</label>
                        <input type="text" id="docA-q1" placeholder="Your answer...">
                    </div>

                    <div class="question">
                        <label>2. Contextualization: Look at your timeline. Why might Galileo write a letter defending himself at this time?</label>
                        <textarea id="docA-q2" placeholder="Your answer..."></textarea>
                    </div>

                    <div class="question">
                        <label>3. Close Reading: According to Galileo, why do some people think his teachings are heretical?</label>
                        <textarea id="docA-q3" placeholder="Your answer..."></textarea>
                    </div>

                    <div class="question">
                        <label>4. Close Reading: How does Galileo defend himself against these charges?</label>
                        <textarea id="docA-q4" placeholder="Your answer..."></textarea>
                    </div>

                    <div class="question">
                        <label>5. Context: Using the information on your timeline, do you think the Catholic Church would accept Galileo's defense? Why or why not?</label>
                        <textarea id="docA-q5" placeholder="Your answer..."></textarea>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn" onclick="previousPhase()">‚Üê Back to Background</button>
                    <button class="btn" onclick="nextPhase()" id="docA-continue">Continue to Document B ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Phase 2: Document B -->
        <div class="phase-content" id="phase2">
            <div class="document-section">
                <div class="document-header">
                    <h3>Document B: Cardinal Bellarmine's Letter</h3>
                    <p>Cardinal Robert Bellarmine was in charge of dealing with difficult issues connected to the Church's power and beliefs during the Galileo controversy.</p>
                    <p>He wrote the following letter to Paolo Antonio Foscarini in response to Foscarini's book defending Galileo.</p>
                    <p style="margin-top: 10px;"><em>Note: Historians don't believe Bellarmine ever saw Galileo's 1615 letter (Document A).</em></p>
                </div>

                <div class="document-text">
                    <p>As you know, the Council [of Trent] prohibits interpreting the Scriptures contrary to the common agreement of the holy Fathers. And if you would read not only the Fathers but also the commentaries of modern writers on Genesis, Psalms, Ecclesiastes and Joshua, you would find that all agree in explaining that the sun is in the heavens and moves swiftly around the earth, and that the earth is far from the heavens and stands immobile in the center of the universe. . . .</p>
                    
                    <p>It would be just as heretical to deny that Abraham had two sons and Jacob twelve, as it would be to deny the virgin birth of Christ, for both are declared by the Holy Ghost through the mouths of the prophets and apostles. . . .</p>
                    
                    <p>I say that if there were a true demonstration that the sun was in the center of the universe and the earth in the third sphere, and that the sun did not travel around the earth but the earth circled the sun, then it would be necessary to proceed with great caution in explaining the passages of Scripture which seemed contrary, and we would rather have to say that we did not understand the Scripture than to say that something was false which has been demonstrated.</p>
                    
                    <p>But I do not believe that there is any such demonstration; none has been shown to me. . . . [One] clearly experiences that the earth stands still and that his eye is not deceived when it judges that the moon and stars move.</p>

                    <p class="source-citation">Source: Cardinal Robert Bellarmine, "Letter on Galileo's Theories," 1615.</p>
                </div>

                <div class="question-section">
                    <h4>Document Analysis Questions</h4>
                    
                    <div class="question">
                        <label>1. Close Reading: Explain TWO reasons Cardinal Bellarmine gave for believing the geocentric theory.</label>
                        <div style="margin-left: 20px;">
                            <p style="margin-top: 10px;"><strong>Reason a:</strong></p>
                            <textarea id="docB-q1a" placeholder="First reason..."></textarea>
                            <p style="margin-top: 15px;"><strong>Reason b:</strong></p>
                            <textarea id="docB-q1b" placeholder="Second reason..."></textarea>
                        </div>
                    </div>

                    <div class="question">
                        <label>2. Close Reading: How did Cardinal Bellarmine respond to the following arguments from Galileo?</label>
                        <div style="margin-left: 20px;">
                            <p style="margin-top: 10px;"><strong>a. The Bible passages about the earth standing still should not have been interpreted literally.</strong></p>
                            <textarea id="docB-q2a" placeholder="Bellarmine's response..."></textarea>
                            <p style="margin-top: 15px;"><strong>b. The model of the universe (heliocentric or geocentric) is not a matter of salvation.</strong></p>
                            <textarea id="docB-q2b" placeholder="Bellarmine's response..."></textarea>
                        </div>
                    </div>

                    <div class="question">
                        <label>3. Context: Why do you think the Catholic Church was so committed to defending the literal meaning of the Bible passages?</label>
                        <textarea id="docB-q3" placeholder="Your answer..."></textarea>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn" onclick="previousPhase()">‚Üê Back to Document A</button>
                    <button class="btn" onclick="nextPhase()" id="docB-continue">Continue to Judgment ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Phase 3: Judgment -->
        <div class="phase-content" id="phase3">
            <div class="judgment-section">
                <h2>Your Judgment</h2>
                
                <div class="warning-box">
                    <strong>Remember:</strong> A heretic is someone whose beliefs go against the teachings of the Church. Your task is NOT to prove whether Galileo's scientific theory is correct, but whether his beliefs and actions constitute heresy according to Church doctrine in 1633.
                </div>

                <div class="info-box">
                    <h4>Evidence You Have:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Heliocentrism and the Catholic Church Timeline</li>
                        <li>Document A: Galileo's Letter (1615)</li>
                        <li>Document B: Cardinal Bellarmine's Letter (1615)</li>
                    </ul>
                </div>

                <h3 style="color: #ffd700; margin: 30px 0 20px 0; text-align: center;">Make Your Decision:</h3>
                
                <div class="verdict-options">
                    <div class="verdict-card" onclick="selectVerdict('was')">
                        <h3>WAS</h3>
                        <p style="font-size: 1.1em; margin-top: 10px;">Galileo WAS a heretic</p>
                    </div>

                    <div class="verdict-card" onclick="selectVerdict('wasnot')">
                        <h3>WAS NOT</h3>
                        <p style="font-size: 1.1em; margin-top: 10px;">Galileo WAS NOT a heretic</p>
                    </div>
                </div>

                <div class="argument-builder">
                    <h4 style="text-align: center; font-size: 1.3em; margin-bottom: 25px;">Support Your Judgment with Evidence</h4>
                    
                    <div class="argument-item">
                        <label style="color: #ffd700; font-size: 1.1em; margin-bottom: 10px; display: block;">Reason 1:</label>
                        <textarea id="reason1" placeholder="State your first reason for your judgment..." rows="3"></textarea>
                        
                        <label style="color: #ffd700; font-size: 1.1em; margin: 15px 0 10px 0; display: block;">Quote from a document to support your reason:</label>
                        <textarea id="quote1" placeholder="Provide a specific quote from Document A or Document B..." rows="2"></textarea>
                    </div>

                    <div class="argument-item">
                        <label style="color: #ffd700; font-size: 1.1em; margin-bottom: 10px; display: block;">Reason 2:</label>
                        <textarea id="reason2" placeholder="State your second reason for your judgment..." rows="3"></textarea>
                        
                        <label style="color: #ffd700; font-size: 1.1em; margin: 15px 0 10px 0; display: block;">Quote from a document to support your reason:</label>
                        <textarea id="quote2" placeholder="Provide a specific quote from Document A or Document B..." rows="2"></textarea>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn" onclick="previousPhase()">‚Üê Back to Document B</button>
                    <button class="btn" onclick="submitJudgment()" id="submit-judgment">Submit Judgment</button>
                </div>
            </div>
        </div>

        <!-- Phase 4: Historical Reveal -->
        <div class="phase-content" id="phase4">
            <div class="reveal-section">
                <h2>What Really Happened?</h2>
                
                <div class="historical-verdict">
                    <h3>The Actual Verdict (1633)</h3>
                    <p style="font-size: 1.2em; margin-top: 15px;"><strong>The Catholic Church found Galileo GUILTY of heresy.</strong></p>
                </div>

                <div class="document-section">
                    <h3 style="color: #ffd700; margin-bottom: 20px;">The Official Charges</h3>
                    <p>The Church condemned Galileo for:</p>
                    <ol style="margin-left: 30px; margin-top: 15px; line-height: 2;">
                        <li><strong>Teaching a theory (heliocentrism) that was contrary to Holy Scripture</strong> - The Church stated: "The proposition that the sun is in the center of the world and immovable from its place is absurd, philosophically false, and formally heretical; because it is expressly contrary to Holy Scriptures."</li>
                        <li style="margin-top: 15px;"><strong>Arguing that something could be true even if the Church believed it contradicted the Bible</strong> - The Church found it heretical that "an opinion can be held and supported as probable, after it has been declared contrary to the Holy Scripture."</li>
                    </ol>

                    <div style="margin-top: 30px; padding: 20px; background: rgba(220, 20, 60, 0.1); border-radius: 8px;">
                        <h4 style="color: #ff6b6b; margin-bottom: 10px;">The Punishment</h4>
                        <p>Under threat of torture, Galileo was forced to recant (take back) his beliefs publicly. He was sentenced to house arrest for the remainder of his life. Galileo died in 1642, still under house arrest.</p>
                    </div>
                </div>

                <div class="timeline">
                    <h3 style="color: #ffd700; text-align: center; margin-bottom: 25px;">What Happened After Galileo's Trial</h3>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">1642</div>
                        <div class="timeline-event">Galileo died while under house arrest.</div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-year">1661</div>
                        <div class="timeline-event">Isaac Newton began teaching Galileo and Copernicus's ideas in England.</div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-year">1758</div>
                        <div class="timeline-event">The Catholic Church ended the ban on books teaching the heliocentric model.</div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-year">1939</div>
                        <div class="timeline-event">Pope Pius XII called Galileo a "hero of research."</div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-year">1979</div>
                        <div class="timeline-event">Pope John Paul II ordered an investigation into the Church's treatment of Galileo.</div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-year">1992</div>
                        <div class="timeline-event">Pope John Paul II officially admitted the Church's treatment of Galileo was wrong. He said the Church "made a scientific issue into an issue of faith" and misinterpreted the Bible. The theologians "did not recognize the formal distinction between the Bible and its interpretation."</div>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Reflection Questions</h4>
                    
                    <div class="question">
                        <label>1. Why was it easier for the Church to admit Galileo was right in 1992 than in 1633?</label>
                        <textarea id="reflect-q1" placeholder="Consider the historical context of each time period..."></textarea>
                    </div>

                    <div class="question">
                        <label>2. Based on this controversy, how was the historical context of the 17th century different from 1992?</label>
                        <textarea id="reflect-q2" placeholder="Think about the Protestant Reformation, Church power, scientific knowledge..."></textarea>
                    </div>

                    <div class="question">
                        <label>3. How might people understand and study our beliefs in 300 years?</label>
                        <textarea id="reflect-q3" placeholder="What ideas do we hold now that future generations might question?"></textarea>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn" onclick="downloadWorksheet()">üìÑ Download as PDF</button>
                    <button class="btn" onclick="submitToSupabase()" id="submitBtn" style="background: #4a6741;">üì§ Submit to Professor</button>
                    <button class="btn" onclick="previousPhase()">‚Üê Back to Review</button>
                </div>

                <div id="submitMessage" style="margin-top: 20px;"></div>
            </div>
        </div>

    </div>

    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://bqrluqymscucvbiaaeai.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxcmx1cXltc2N1Y3ZiaWFhZWFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2Njg4MTMsImV4cCI6MjA4NDI0NDgxM30.AVOjnQe_TDoWydE2wDP1_YftU1lBkYxcPuyQeZb8Nfs';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Submission cutoff date - set to null for no deadline
        const SUBMISSION_CUTOFF = null;

        let currentPhase = 0;
        let selectedVerdict = null;
        let judgmentSubmitted = false;

        function startInvestigation() {
            const studentName = document.getElementById('student-name').value.trim();
            
            if (!studentName) {
                alert('Please enter your name before continuing.');
                document.getElementById('student-name').focus();
                return;
            }
            
            showPhase(1);
        }

        function updateProgress(phase) {
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < phase) {
                    step.classList.add('completed');
                } else if (index === phase) {
                    step.classList.add('active');
                }
            });
        }

        function showPhase(phase) {
            // Hide all phases
            document.querySelectorAll('.phase-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected phase
            document.getElementById(`phase${phase}`).classList.add('active');
            
            updateProgress(phase);
            currentPhase = phase;
            window.scrollTo(0, 0);
        }

        function nextPhase() {
            if (currentPhase < 4) {
                if (currentPhase === 3 && !judgmentSubmitted) {
                    alert('Please submit your judgment before continuing.');
                    return;
                }
                showPhase(currentPhase + 1);
            }
        }

        function previousPhase() {
            if (currentPhase > 0) {
                showPhase(currentPhase - 1);
            }
        }

        function selectVerdict(verdict) {
            selectedVerdict = verdict;
            document.querySelectorAll('.verdict-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.verdict-card').classList.add('selected');
        }

        function submitJudgment() {
            if (!selectedVerdict) {
                alert('Please select a verdict: Was Galileo a heretic or not?');
                return;
            }

            const reason1 = document.getElementById('reason1').value.trim();
            const quote1 = document.getElementById('quote1').value.trim();
            const reason2 = document.getElementById('reason2').value.trim();
            const quote2 = document.getElementById('quote2').value.trim();

            if (!reason1 || !quote1 || !reason2 || !quote2) {
                alert('Please complete all fields:\n\n‚Ä¢ Reason 1\n‚Ä¢ Supporting quote 1\n‚Ä¢ Reason 2\n‚Ä¢ Supporting quote 2');
                return;
            }

            judgmentSubmitted = true;
            updateProgress(4);
            alert('Judgment submitted! You can now see what really happened.');
            nextPhase();
        }

        function downloadWorksheet() {
            const studentName = document.getElementById('student-name').value.trim();
            
            if (!studentName) {
                alert('Please enter your name in the Introduction section.');
                showPhase(0);
                return;
            }

            if (!judgmentSubmitted) {
                alert('Please complete your judgment before downloading.');
                return;
            }

            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                let y = 20;
                const lineHeight = 7;
                const pageHeight = doc.internal.pageSize.height;
                const margin = 20;

                function addText(text, size = 12, isBold = false) {
                    doc.setFontSize(size);
                    if (isBold) {
                        doc.setFont(undefined, 'bold');
                    } else {
                        doc.setFont(undefined, 'normal');
                    }

                    const lines = doc.splitTextToSize(text, 170);
                    for (let i = 0; i < lines.length; i++) {
                        if (y > pageHeight - margin) {
                            doc.addPage();
                            y = 20;
                        }
                        doc.text(lines[i], 20, y);
                        y += lineHeight;
                    }
                    y += 3;
                }

                // Title
                doc.setFontSize(18);
                doc.setFont(undefined, 'bold');
                doc.text('Galileo Investigation Worksheet', 20, y);
                y += 10;
                
                doc.setFontSize(12);
                doc.text('Was Galileo Really a Heretic?', 20, y);
                y += 15;

                // Student info
                addText(`Student: ${studentName}`, 12, true);
                const sectionNumber = document.getElementById('section-number').value.trim();
                if (sectionNumber) {
                    addText(`Section: ${sectionNumber}`, 12, true);
                }
                addText(`Completed: ${new Date().toLocaleString()}`, 10);
                y += 5;

                // Document A Analysis
                addText('DOCUMENT A ANALYSIS', 14, true);
                y += 2;

                addText('1. When was this document written?', 11, true);
                addText(document.getElementById('docA-q1').value || '[Not answered]', 10);
                y += 3;

                addText('2. Why might Galileo write a letter defending himself at this time?', 11, true);
                addText(document.getElementById('docA-q2').value || '[Not answered]', 10);
                y += 3;

                addText('3. According to Galileo, why do some people think his teachings are heretical?', 11, true);
                addText(document.getElementById('docA-q3').value || '[Not answered]', 10);
                y += 3;

                addText('4. How does Galileo defend himself against these charges?', 11, true);
                addText(document.getElementById('docA-q4').value || '[Not answered]', 10);
                y += 3;

                addText('5. Do you think the Catholic Church would accept Galileo\'s defense? Why or why not?', 11, true);
                addText(document.getElementById('docA-q5').value || '[Not answered]', 10);
                y += 5;

                // Document B Analysis
                addText('DOCUMENT B ANALYSIS', 14, true);
                y += 2;

                addText('1. TWO reasons Cardinal Bellarmine gave for believing the geocentric theory:', 11, true);
                addText('Reason a:', 10, true);
                addText(document.getElementById('docB-q1a').value || '[Not answered]', 10);
                addText('Reason b:', 10, true);
                addText(document.getElementById('docB-q1b').value || '[Not answered]', 10);
                y += 3;

                addText('2a. How did Bellarmine respond to: "The Bible passages should not be interpreted literally"', 11, true);
                addText(document.getElementById('docB-q2a').value || '[Not answered]', 10);
                y += 3;

                addText('2b. How did Bellarmine respond to: "The model of the universe is not a matter of salvation"', 11, true);
                addText(document.getElementById('docB-q2b').value || '[Not answered]', 10);
                y += 3;

                addText('3. Why do you think the Catholic Church was so committed to defending the literal meaning of the Bible passages?', 11, true);
                addText(document.getElementById('docB-q3').value || '[Not answered]', 10);
                y += 5;

                // Your Judgment
                addText('YOUR JUDGMENT', 14, true);
                y += 2;

                const verdict = selectedVerdict === 'was' ? 'WAS a heretic' : 'WAS NOT a heretic';
                addText(`Galileo ${verdict} because:`, 12, true);
                y += 2;

                addText('Reason 1:', 11, true);
                addText(document.getElementById('reason1').value || '[Not provided]', 10);
                addText('Supporting Quote 1:', 11, true);
                addText(document.getElementById('quote1').value || '[Not provided]', 10);
                y += 3;

                addText('Reason 2:', 11, true);
                addText(document.getElementById('reason2').value || '[Not provided]', 10);
                addText('Supporting Quote 2:', 11, true);
                addText(document.getElementById('quote2').value || '[Not provided]', 10);
                y += 5;

                // Reflections
                addText('REFLECTION QUESTIONS', 14, true);
                y += 2;

                addText('1. Why was it easier for the Church to admit Galileo was right in 1992 than in 1633?', 11, true);
                addText(document.getElementById('reflect-q1').value || '[Not answered]', 10);
                y += 3;

                addText('2. How was the historical context of the 17th century different from 1992?', 11, true);
                addText(document.getElementById('reflect-q2').value || '[Not answered]', 10);
                y += 3;

                addText('3. How might people understand and study our beliefs in 300 years?', 11, true);
                addText(document.getElementById('reflect-q3').value || '[Not answered]', 10);

                // Save the PDF
                const fileName = `Galileo_Investigation_${studentName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
                doc.save(fileName);

                alert('PDF downloaded successfully!');
            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('There was an error generating the PDF. Please make sure all fields are completed.');
            }
        }

        async function submitToSupabase() {
            // Check deadline
            if (SUBMISSION_CUTOFF) {
                const cutoffDate = new Date(SUBMISSION_CUTOFF);
                const now = new Date();
                if (now > cutoffDate) {
                    alert('The submission deadline has passed. Please contact your professor if you need an extension.');
                    return;
                }
            }

            const studentName = document.getElementById('student-name').value.trim();
            const sectionNumber = document.getElementById('section-number').value.trim();

            if (!studentName) {
                alert('Please enter your name in the Introduction section.');
                showPhase(0);
                return;
            }

            if (!sectionNumber) {
                alert('Please enter your section number in the Introduction section.');
                showPhase(0);
                document.getElementById('section-number').focus();
                return;
            }

            if (!judgmentSubmitted) {
                alert('Please complete your judgment before submitting.');
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            const messageDiv = document.getElementById('submitMessage');

            submitBtn.disabled = true;
            submitBtn.textContent = '‚è≥ Submitting...';
            messageDiv.innerHTML = '<div style="background: #fff9e6; border: 2px solid rgba(100, 149, 237, 0.3); padding: 20px; border-radius: 8px;">Generating and uploading your PDF...</div>';

            try {
                await ensureSupabaseSession();
                const pdfBlob = await generatePDFBlob();

                const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                const sanitizedName = studentName.replace(/[^a-zA-Z0-9]/g, '_');
                const fileName = `galileo-investigation/${sectionNumber}/${sanitizedName}_${timestamp}.pdf`;

                const { error: uploadError } = await supabaseClient
                    .storage
                    .from('student-submissions')
                    .upload(fileName, pdfBlob, {
                        contentType: 'application/pdf',
                        upsert: false
                    });

                if (uploadError) {
                    throw new Error(`Upload failed: ${uploadError.message}`);
                }

                const { data: urlData } = supabaseClient
                    .storage
                    .from('student-submissions')
                    .getPublicUrl(fileName);

                // Collect form data
                const formData = {
                    studentName: studentName,
                    sectionNumber: sectionNumber,
                    documentA: {
                        q1: document.getElementById('docA-q1').value,
                        q2: document.getElementById('docA-q2').value,
                        q3: document.getElementById('docA-q3').value,
                        q4: document.getElementById('docA-q4').value,
                        q5: document.getElementById('docA-q5').value
                    },
                    documentB: {
                        q1a: document.getElementById('docB-q1a').value,
                        q1b: document.getElementById('docB-q1b').value,
                        q2a: document.getElementById('docB-q2a').value,
                        q2b: document.getElementById('docB-q2b').value,
                        q3: document.getElementById('docB-q3').value
                    },
                    judgment: {
                        verdict: selectedVerdict,
                        reason1: document.getElementById('reason1').value,
                        quote1: document.getElementById('quote1').value,
                        reason2: document.getElementById('reason2').value,
                        quote2: document.getElementById('quote2').value
                    },
                    reflections: {
                        q1: document.getElementById('reflect-q1').value,
                        q2: document.getElementById('reflect-q2').value,
                        q3: document.getElementById('reflect-q3').value
                    }
                };

                await supabaseClient
                    .from('worksheet_submissions')
                    .insert({
                        student_name: studentName,
                        section_number: sectionNumber,
                        worksheet_type: 'galileo-investigation',
                        file_path: fileName,
                        file_url: urlData.publicUrl,
                        form_data: formData,
                        submitted_at: new Date().toISOString()
                    });

                messageDiv.innerHTML = '<div style="background: #4a6741; color: #f1f1f1; padding: 20px; border-radius: 8px; border-left: 5px solid #ffd700;">‚úÖ Successfully submitted! Your work has been sent to Prof. Hauselmann.</div>';
                submitBtn.textContent = '‚úì Submitted';

            } catch (error) {
                console.error('Submission error:', error);
                messageDiv.innerHTML = `<div style="background: rgba(220, 20, 60, 0.2); color: #2c1810; padding: 20px; border-radius: 8px; border-left: 5px solid #dc143c;">‚ùå Submission failed: ${error.message}. Please try again or download the PDF and email it to your professor.</div>`;
                submitBtn.disabled = false;
                submitBtn.textContent = 'üì§ Submit to Professor';
            }
        }

        async function ensureSupabaseSession() {
            const { data } = await supabaseClient.auth.getSession();
            if (data?.session) {
                return;
            }

            const { error } = await supabaseClient.auth.signInAnonymously();
            if (error) {
                throw new Error(`Authentication failed: ${error.message}`);
            }
        }

        function generatePDFBlob() {
            return new Promise((resolve) => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                let y = 20;
                const lineHeight = 7;
                const pageHeight = doc.internal.pageSize.height;
                const margin = 20;

                function addText(text, size = 12, isBold = false) {
                    doc.setFontSize(size);
                    if (isBold) {
                        doc.setFont(undefined, 'bold');
                    } else {
                        doc.setFont(undefined, 'normal');
                    }

                    const lines = doc.splitTextToSize(text, 170);
                    for (let i = 0; i < lines.length; i++) {
                        if (y > pageHeight - margin) {
                            doc.addPage();
                            y = 20;
                        }
                        doc.text(lines[i], 20, y);
                        y += lineHeight;
                    }
                    y += 3;
                }

                const studentName = document.getElementById('student-name').value.trim();
                const sectionNumber = document.getElementById('section-number').value.trim();

                doc.setFontSize(18);
                doc.setFont(undefined, 'bold');
                doc.text('Galileo Investigation Worksheet', 20, y);
                y += 10;
                
                doc.setFontSize(12);
                doc.text('Was Galileo Really a Heretic?', 20, y);
                y += 15;

                addText(`Student: ${studentName}`, 12, true);
                if (sectionNumber) {
                    addText(`Section: ${sectionNumber}`, 12, true);
                }
                addText(`Completed: ${new Date().toLocaleString()}`, 10);
                y += 5;

                addText('DOCUMENT A ANALYSIS', 14, true);
                y += 2;
                addText('1. When was this document written?', 11, true);
                addText(document.getElementById('docA-q1').value || '[Not answered]', 10);
                y += 3;
                addText('2. Why might Galileo write a letter defending himself at this time?', 11, true);
                addText(document.getElementById('docA-q2').value || '[Not answered]', 10);
                y += 3;
                addText('3. According to Galileo, why do some people think his teachings are heretical?', 11, true);
                addText(document.getElementById('docA-q3').value || '[Not answered]', 10);
                y += 3;
                addText('4. How does Galileo defend himself against these charges?', 11, true);
                addText(document.getElementById('docA-q4').value || '[Not answered]', 10);
                y += 3;
                addText('5. Do you think the Catholic Church would accept Galileo\'s defense? Why or why not?', 11, true);
                addText(document.getElementById('docA-q5').value || '[Not answered]', 10);
                y += 5;

                addText('DOCUMENT B ANALYSIS', 14, true);
                y += 2;
                addText('1. TWO reasons Cardinal Bellarmine gave for believing the geocentric theory:', 11, true);
                addText('Reason a:', 10, true);
                addText(document.getElementById('docB-q1a').value || '[Not answered]', 10);
                addText('Reason b:', 10, true);
                addText(document.getElementById('docB-q1b').value || '[Not answered]', 10);
                y += 3;
                addText('2a. How did Bellarmine respond to: "The Bible passages should not be interpreted literally"', 11, true);
                addText(document.getElementById('docB-q2a').value || '[Not answered]', 10);
                y += 3;
                addText('2b. How did Bellarmine respond to: "The model of the universe is not a matter of salvation"', 11, true);
                addText(document.getElementById('docB-q2b').value || '[Not answered]', 10);
                y += 3;
                addText('3. Why do you think the Catholic Church was so committed to defending the literal meaning of the Bible passages?', 11, true);
                addText(document.getElementById('docB-q3').value || '[Not answered]', 10);
                y += 5;

                addText('YOUR JUDGMENT', 14, true);
                y += 2;
                const verdict = selectedVerdict === 'was' ? 'WAS a heretic' : 'WAS NOT a heretic';
                addText(`Galileo ${verdict} because:`, 12, true);
                y += 2;
                addText('Reason 1:', 11, true);
                addText(document.getElementById('reason1').value || '[Not provided]', 10);
                addText('Supporting Quote 1:', 11, true);
                addText(document.getElementById('quote1').value || '[Not provided]', 10);
                y += 3;
                addText('Reason 2:', 11, true);
                addText(document.getElementById('reason2').value || '[Not provided]', 10);
                addText('Supporting Quote 2:', 11, true);
                addText(document.getElementById('quote2').value || '[Not provided]', 10);
                y += 5;

                addText('REFLECTION QUESTIONS', 14, true);
                y += 2;
                addText('1. Why was it easier for the Church to admit Galileo was right in 1992 than in 1633?', 11, true);
                addText(document.getElementById('reflect-q1').value || '[Not answered]', 10);
                y += 3;
                addText('2. How was the historical context of the 17th century different from 1992?', 11, true);
                addText(document.getElementById('reflect-q2').value || '[Not answered]', 10);
                y += 3;
                addText('3. How might people understand and study our beliefs in 300 years?', 11, true);
                addText(document.getElementById('reflect-q3').value || '[Not answered]', 10);

                resolve(doc.output('blob'));
            });
        }

        // Auto-save to localStorage
        setInterval(() => {
            const state = {
                studentName: document.getElementById('student-name').value,
                sectionNumber: document.getElementById('section-number').value,
                docA: {
                    q1: document.getElementById('docA-q1').value,
                    q2: document.getElementById('docA-q2').value,
                    q3: document.getElementById('docA-q3').value,
                    q4: document.getElementById('docA-q4').value,
                    q5: document.getElementById('docA-q5').value
                },
                docB: {
                    q1a: document.getElementById('docB-q1a').value,
                    q1b: document.getElementById('docB-q1b').value,
                    q2a: document.getElementById('docB-q2a').value,
                    q2b: document.getElementById('docB-q2b').value,
                    q3: document.getElementById('docB-q3').value
                },
                judgment: {
                    verdict: selectedVerdict,
                    reason1: document.getElementById('reason1').value,
                    quote1: document.getElementById('quote1').value,
                    reason2: document.getElementById('reason2').value,
                    quote2: document.getElementById('quote2').value
                },
                reflections: {
                    q1: document.getElementById('reflect-q1').value,
                    q2: document.getElementById('reflect-q2').value,
                    q3: document.getElementById('reflect-q3').value
                }
            };
            localStorage.setItem('galileoInvestigation', JSON.stringify(state));
        }, 30000);

        // Load saved state on page load
        window.onload = function() {
            const saved = localStorage.getItem('galileoInvestigation');
            if (saved) {
                const shouldRestore = confirm('Would you like to restore your previous session?');
                if (shouldRestore) {
                    const state = JSON.parse(saved);
                    document.getElementById('student-name').value = state.studentName || '';
                    document.getElementById('section-number').value = state.sectionNumber || '';
                    document.getElementById('docA-q1').value = state.docA.q1 || '';
                    document.getElementById('docA-q2').value = state.docA.q2 || '';
                    document.getElementById('docA-q3').value = state.docA.q3 || '';
                    document.getElementById('docA-q4').value = state.docA.q4 || '';
                    document.getElementById('docA-q5').value = state.docA.q5 || '';
                    document.getElementById('docB-q1a').value = state.docB.q1a || '';
                    document.getElementById('docB-q1b').value = state.docB.q1b || '';
                    document.getElementById('docB-q2a').value = state.docB.q2a || '';
                    document.getElementById('docB-q2b').value = state.docB.q2b || '';
                    document.getElementById('docB-q3').value = state.docB.q3 || '';
                    document.getElementById('reason1').value = state.judgment.reason1 || '';
                    document.getElementById('quote1').value = state.judgment.quote1 || '';
                    document.getElementById('reason2').value = state.judgment.reason2 || '';
                    document.getElementById('quote2').value = state.judgment.quote2 || '';
                    document.getElementById('reflect-q1').value = state.reflections.q1 || '';
                    document.getElementById('reflect-q2').value = state.reflections.q2 || '';
                    document.getElementById('reflect-q3').value = state.reflections.q3 || '';
                    selectedVerdict = state.judgment.verdict;
                }
            }
        };

        // Initialize
        updateProgress(0);
    </script>
</body>
</html>
